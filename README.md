# 🔐 亲密金库 (Intimate Vault)

> **让信任有边界，让爱更透明。** > 一款专为情侣、家庭设计的资产管理与记账 App，集成了 AI 智能风控与毒舌点评。

[在线演示] | [下载安卓 APK] | [提交 Issue]

---

## 📖 项目简介

**亲密金库** 不仅仅是一个记账软件，它是一个连接亲密关系的金融纽带。它解决了“共同财产如何管理”与“个人隐私如何保护”之间的矛盾。

通过**“申请看一眼”**机制，既保留了各自的隐私空间，又能在需要时建立透明度。结合 AI 智能识别与**风控拦截**，让记账变得既简单又安全。

### ✨ 核心亮点

* **🛡️ 智能余额熔断保护**：拒绝负债记账！当支出金额 > 账户余额时，系统自动拦截并弹窗警告。
* **🤖 AI 全能多任务识账**：基于 LLM 大模型，支持自然语言输入（如：“早饭10元，工资收入5000”），自动拆分多笔收支并录入。
* **🐍 AI 毒舌点评**：内置“特朗普”、“林黛玉”、“华尔街之狼”等 10+ 种人格，根据你的消费习惯进行犀利吐槽。
* **👀 独创“看一眼”社交**：想看对方账本？发起申请，对方同意后仅限查看一次，退出即销毁权限。
* **🏆 亲密排行榜**：只比拼当月收支流水，不暴露总资产底牌，激发良性省钱竞争。
* **🧬 生物识别安全锁**：支持指纹/面部解锁，支持备用密码，金融级隐私保护。

---

## 📸 应用截图

| 总览与资产 | 智能风控 | AI 毒舌 | 亲密排行 |
| --- | --- | --- | --- |
| <img src="QQ_1766900200392.png" width="200"/> | <img src="Screenshot_2025-12-28-14-09-53-719_cc.wodeshouzhi.jpg" width="200"/> | <img src="image_d316bd.png" width="200"/> | <img src="Screenshot_2025-12-28-15-28-39-305_cc.wodeshouzhi.jpg" width="200"/> |

| 记账与余额 | 账户管理 | 抓包/网络 | 启动页 |
| --- | --- | --- | --- |
| <img src="Screenshot_2025-12-28-13-52-34-218_cc.wodeshouzhi.jpg" width="200"/> | <img src="Screenshot_2025-12-28-14-09-37-166_cc.wodeshouzhi.jpg" width="200"/> | <img src="Screenshot_2025-12-28-15-38-05-036_com.network.pr.jpg" width="200"/> | <img src="Screenshot_2025-12-28-15-28-44-566_cc.wodeshouzhi.jpg" width="200"/> |

---

## 🛠️ 技术栈

本项目采用前后端分离架构，轻量级部署。

* **前端**：[UniApp](https://uniapp.dcloud.io/) (Vue 2)
* 支持打包为 Android APK、H5、iOS。
* 使用了 `SoterAuthentication` 进行指纹识别。


* **后端**：Native PHP (无框架，纯手写 API)
* 极大降低服务器部署门槛，支持虚拟主机。
* PDO 数据库操作，防止 SQL 注入。


* **数据库**：MySQL
* **AI 支持**：兼容 OpenAI 接口格式 (支持 GPT-3.5/4, DeepSeek 等)。

---

## 🚀 快速开始

### 1. 后端部署 (API)

1. 将 `api.php` 上传至你的 PHP 服务器（支持 PHP 7.0+）。
2. 创建 MySQL 数据库 `money_app`，并导入以下表结构（*需根据代码自行补充 SQL，以下为简述*）：
* `users`: 用户表 (含 `security_code`, `accounting_mode` 等)。
* `accounts`: 账户表 (微信、支付宝、现金等)。
* `records`: 收支记录表。
* `friends`: 好友关系表。
* `messages`: 站内信表。
* `system_settings`: AI 配置表 (`ai_api_url`, `ai_api_key` 等)。
* `asset_history`: 资产变动流水表。


3. 修改 `api.php` 顶部的数据库配置：
```php
$host = 'localhost';
$db   = 'money_app';
$user = 'root';
$pass = '你的密码';

```


4. 在数据库 `system_settings` 表中配置你的 AI API Key 和 SMTP 邮箱服务。

### 2. 前端部署 (App)

1. 下载 [HBuilderX](https://www.dcloud.io/hbuilderx.html)。
2. 导入前端项目目录。
3. 打开 `index.vue`，修改 `apiBase` 变量为你服务器的地址：
```javascript
data() {
    return {
        apiBase: 'https://你的域名/api.php',
        // ...
    }
}

```


4. **真机调试/打包**：
* 连接手机，点击 "运行" -> "运行到手机"。
* 或者点击 "发行" -> "原生App-云打包" 生成 APK。



---

## ⚙️ 功能特性详解

### 💰 资金池模式 vs 真实账户模式

* **真实账户**：严格对应微信、支付宝余额，不仅记流水，还维护账户余额。
* **资金池模式**：弱化具体账户，只关注“总存款”和“本月结余”，适合不爱记细账的用户。

### 🛡️ 智能余额保护 (V15.0)

在记账（手动或 AI）时，系统会实时查询对应账户余额。

* 若 `支出金额 > 账户余额`：
* 🛑 **拦截**：弹窗提示“余额不足”。
* ⚠️ **选项**：用户可选择“返回修改”或“强制记账”（余额变负）。



### 🆔 真实身份唯一性

注册时强制校验 `realname` 唯一性，防止重名导致排行榜混淆。

---

## 🤝 贡献 (Contributing)

欢迎提交 Issue 和 Pull Request！

1. Fork 本仓库。
2. 新建 Feat_xxx 分支。
3. 提交代码。
4. 新建 Pull Request。

---

## 📄 开源协议

本项目遵循 MIT 协议开源。

Copyright (c) 2024-2025 亲密金库 Team.

---

**特别致谢**：感谢所有参与测试并反馈“白屏问题”的用户，V15.0 版本已彻底修复真机网络请求阻塞导致的白屏问题。
